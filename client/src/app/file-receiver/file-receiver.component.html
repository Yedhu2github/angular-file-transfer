<div id="wrapper">
  <!--confirmation-->
  <div class="stick-top col-md-12 z-index-1">
    <div class="card m-5">
      <div class="card-body">
        <div *ngIf="fileStatus == 'pending'" id="notification">
          <div class="row">
            <div class="col-md-12">
              <span
                >{{ payloadRef.file.sender }} want to send
                {{ payloadRef.file.name }}({{ returnFileSize() }}) to you.
                <br />
                Would you like to receive the file?</span
              >
            </div>
            <div class="mt-3 col-md-12 text-center">
              <button
                class="btn btn-primary"
                (click)="receive(true); fileStatus = 'processing'"
              >
                Yes
              </button>
              <button
                class="btn btn-warning ml-3"
                (click)="receive(false); fileStatus = 'processing'"
              >
                No
              </button>
            </div>
          </div>
        </div>
        <!--file receiving progress-->

        <div *ngIf="fileStatus == 'processing'" id="receive-progress">
          <span class="mb-4"
            >Receiving
            <span class="text-info">{{ payloadRef.file.name }}</span> from
            <span class="text-info"> {{ receiver.name }}</span></span
          >
          <div class="col-md-12 text-center">
            <span
              *ngIf="percentage !== 100"
              class="text-small postion-absolute text-white"
              >{{ percentage }}%</span
            >

            <span
              *ngIf="percentage == 100"
              class="text-small postion-absolute text-white"
              >finishing..</span
            >
            <ngb-progressbar
              class="mt-3"
              type="info"
              [value]="percentage"
              [striped]="true"
              [animated]="true"
            ></ngb-progressbar>
          </div>

          <div class="col-md-12 mt-4 text-center">
            <button class="btn btn-warning" (click)="receive(false)">
              cancel
            </button>
          </div>
        </div>
      </div>
      <!--download confirmation-->
      <div *ngIf="fileStatus == 'received'" id="download">
        <div class="row m-1">
          <div class="col-md-12">
            <span
              >You have received {{ payloadRef.file.name }}. <br />
              Would you like to download the file?</span
            >
          </div>
          <div class="mt-3 col-md-12 text-center">
            <button class="btn btn-success mb-2" (click)="download(true)">
              Download
            </button>

            <button class="btn btn-danger ml-3 mb-2" (click)="download(false)">
              Discard
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
